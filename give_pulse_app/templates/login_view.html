{% extends "base.html" %}
{% load static %}

{% block title %}Login - GivePulse{% endblock %}

{% block content %}
<section class="login-section d-flex align-items-center justify-content-center py-5">
  <div class="container">
    <div class="row justify-content-center">
      <div class="col-md-7 col-lg-5">
        <div class="card shadow border-0 rounded-4 overflow-hidden animate__animated animate__fadeInUp">

          <!-- Header -->
          <div class="text-center p-4 bg-light-green">
            <img src="{% static 'images/logo.png' %}" alt="GivePulse Logo" class="mb-2" style="height:65px;">
            <h3 class="fw-bold text-primary-red mb-1">Welcome Back!</h3>
            <p class="text-muted mb-0">Log in to continue saving lives</p>
          </div>

          <!-- Body -->
          <div class="card-body p-4">
            <form method="POST" novalidate>
              {% csrf_token %}
              <!-- Email -->
              <div class="mb-4">
                <label for="id_email" class="form-label fw-semibold text-secondary-green">
                  <i class="bi bi-envelope-fill me-1"></i> Email Address
                </label>
                {{ form.email }}
                {% if form.email.errors %}
                  <div class="invalid-feedback d-block small">{{ form.email.errors.0 }}</div>
                {% endif %}
              </div>

              <!-- Password -->
              <div class="mb-4 password-wrapper">
                <label for="id_password" class="form-label fw-semibold text-secondary-green">
                  <i class="bi bi-lock-fill me-1"></i> Password
                </label>
                <div class="position-relative">
                  {{ form.password }}
                  <i class="bi bi-eye position-absolute toggle-password" 
                     data-target="id_password"></i>
                </div>
                {% if form.password.errors %}
                  <div class="invalid-feedback d-block small">{{ form.password.errors.0 }}</div>
                {% endif %}
              </div>

              <!-- Login -->
              <button type="submit" class="btn btn-primary-red w-100 py-2 fw-bold mt-2">
                Login
              </button>
            </form>

            <!-- Links -->
            <div class="text-center mt-4">
              <p class="text-muted mb-1 small">Donâ€™t have an account?</p>
              <a href="{% url 'register_donor' %}" class="fw-semibold text-secondary-green text-decoration-none me-2">Register as Donor</a>
              <span class="text-muted">|</span>
              <a href="{% url 'register_staff' %}" class="fw-semibold text-secondary-green text-decoration-none ms-2">Register as Staff</a>
            </div>
          </div>

        </div>
      </div>
    </div>
  </div>
</section>

{% block extra_css %}
<link href="{% static 'css/login.css' %}" rel="stylesheet">
<link href="{% static 'css/forms.css' %}" rel="stylesheet">
{% endblock %}

<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css" rel="stylesheet">

{% block extra_js %}
<!-- Password toggle functionality is now handled by the unified password-toggle.js in base.html -->
{% endblock %}
{% endblock %}
